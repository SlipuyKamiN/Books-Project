{"mappings":"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","sources":["src/index.js","node_modules/@parcel/plugin/lib/PluginAPI.js","node_modules/parcel-transformer-hbs/index.js","src/js/home/allCategories.js","src/js/categories.js"],"sourcesContent":["import './js/fetchBooks';\nimport './js/modal';\nimport './js/auth-modal';\nimport './js/scroll-up';\nimport './js/darkTheme';\nimport './js/categories';\nimport './js/home/allCategories';\nimport './js/support';\n\nimport './js/header';\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Validator = exports.Transformer = exports.Runtime = exports.Resolver = exports.Reporter = exports.Packager = exports.Optimizer = exports.Namer = exports.Compressor = exports.Bundler = void 0;\nconst CONFIG = Symbol.for('parcel-plugin-config');\n\nclass Transformer {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Transformer = Transformer;\n\nclass Resolver {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Resolver = Resolver;\n\nclass Bundler {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Bundler = Bundler;\n\nclass Namer {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Namer = Namer;\n\nclass Runtime {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Runtime = Runtime;\n\nclass Validator {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Validator = Validator;\n\nclass Packager {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Packager = Packager;\n\nclass Optimizer {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Optimizer = Optimizer;\n\nclass Compressor {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Compressor = Compressor;\n\nclass Reporter {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Reporter = Reporter;","const { Transformer } = require(\"@parcel/plugin\")\nconst Handlebars  = require(\"handlebars\");\n\nconst transformer = new Transformer({\n  async transform({ asset }) {\n    const content = await asset.getCode();\n    const precompiled = Handlebars.precompile(content);\n    asset.setCode(`\n    import Handlebars from 'handlebars';\n    const templateFunction = Handlebars.template(${precompiled});\n    export default templateFunction`)\n    asset.type = \"js\"\n    return [asset];\n  },\n});\n\nmodule.exports = transformer;\n","import { fetchBooks } from '../fetchBooks';\nimport { handleModalWindow } from '../modal';\nimport { drawCategory } from '../categories';\n// import { title } from '../categories';\n\nconst mainTitleEl = document.querySelector('.main__title-js');\nconst mainWraperEl = document.querySelector('.main__list-js');\nlet idBook = 0;\nlet title = 0;\n\nexport const showAllCategories = () => {\n  mainTitleEl.innerHTML =\n    ' Best Sellers <span class=\"main__title--color-purple\">Books</span>';\n  feachAllCategories();\n};\n\nshowAllCategories();\n\nconst makeMarkupAllCategories = categories => {\n  return categories\n    .map(category => {\n      return `\n           <li class='all-categories__item'>\n           <h4 class='category-books__title'>${category.list_name}</h4>\n            <ul class='category-books__list-js card-set'>\n           ${makeMarkupGategory(category.books)}\n           </ul>\n           <button class=\"load-more-js\" type=\"button\" data-category=\"${\n             category.list_name\n           }\">see more</button>\n           </li>\n      `;\n    })\n    .join('');\n};\n\nexport const makeMarkupGategory = category => {\n  return category\n    .map(book => {\n      return `\n        <li class='category-books__item'>\n         <a href=\"/\" class='category-books__link'>\n          <img\n            class='category-books__img'\n            src='${book.book_image}'\n            alt='book'\n            data-id=\"${book._id}\"\n           loading=\"lazy\"\n          />\n          <div class='category-books__wrapper'>\n          <p class='category-books__text'>quick view</p>\n          </div>\n          </a>\n          <h3 class='category-books__name' >${checkLengthBookTitle(\n            book.title,\n            18\n          )}</h3>\n          <p class='category-books__author'>${checkLengthBookTitle(\n            book.author,\n            29\n          )}</p>\n        </li>\n      `;\n    })\n    .join('');\n};\n\nasync function feachAllCategories() {\n  try {\n    const categories = await fetchBooks.getBestSellers();\n    mainWraperEl.innerHTML = makeMarkupAllCategories(categories);\n\n    const seeMoreBtnEl = document.querySelectorAll('.load-more-js');\n    const bookCategoryEl = document.querySelectorAll('.category-books__item');\n\n    // seeMoreBtnEl.forEach(el => {\n    //   el.addEventListener('click', handleSeeMoreBtnClick);\n    // });\n\n    // bookCategoryEl.forEach(el => {\n    //   el.addEventListener('click', handleImgClick);\n    // });\n\n    addEventListenerForBook(bookCategoryEl);\n    addEventListenerForBtn(seeMoreBtnEl);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nconst handleImgClick = event => {\n  event.preventDefault();\n  idBook = event.target.dataset.id;\n\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n  handleModalWindow(idBook);\n};\n\nconst handleSeeMoreBtnClick = event => {\n  title = event.target.dataset.category;\n  console.log(title);\n  drawCategory(title);\n};\n\nexport const checkLengthBookTitle = (title, length) => {\n  if (title.length > length) {\n    return `${title.slice(0, length)}...`;\n  }\n\n  return title;\n};\n\nexport const addEventListenerForBook = book => {\n  book.forEach(el => {\n    el.addEventListener('click', handleImgClick);\n  });\n};\n\nconst addEventListenerForBtn = category => {\n  category.forEach(el => {\n    el.addEventListener('click', handleSeeMoreBtnClick);\n  });\n};\n","import transformer from 'parcel-transformer-hbs';\nimport { fetchBooks } from '../js/fetchBooks';\nimport { makeMarkupGategory, showAllCategories } from './home/allCategories';\nimport { handleImgClick } from './home/allCategories';\nimport { handleModalWindow } from './modal';\nimport { addEventListenerForBook } from './home/allCategories';\n// import { checkLengthBookTitle } from './home/allCategories';\nimport { addEventListenerForBook } from './home/allCategories';\nimport { showAllCategories } from './home/allCategories';\n\nconst listEl = document.querySelector('.categories-list-js');\nconst mainListEl = document.querySelector('.main__list-js');\nconst mainTitle = document.querySelector('.main__title-js');\nconst allCategoriesBtn = document.querySelector('.all-categories-btn');\n\nconst createCategoryList = async () => {\n  const categoriesList = await fetchBooks.getCategoriesList();\n\n  const makeNewButtons = categoriesList\n    .map(\n      category =>\n        `<li class= 'categories-list__button'> <button>${category.list_name}</button> </li>`\n    )\n    .join('');\n  listEl.insertAdjacentHTML('beforeend', makeNewButtons);\n};\ncreateCategoryList();\n\n// allCategoriesBtn.addEventListener('click', showAllCategories);\n\nexport const drawCategory = async name => {\n  const books = await fetchBooks.getBooksByCategory(name);\n  const markup = makeMarkupGategory(books);\n  const titleArr = name.split(' ');\n  const titleFirstPart = titleArr.slice(0, titleArr.length - 1).join(' ');\n  const titleLastPart = titleArr.slice(titleArr.length - 1).join();\n  mainTitle.innerHTML = `${titleFirstPart}<span class=\"main__title--color-purple\"> ${titleLastPart}</span>`;\n  mainListEl.innerHTML = markup;\n  mainListEl.classList.add('card-set');\n  const bookCategoryEl = document.querySelectorAll('.category-books__item');\n  addEventListenerForBook(bookCategoryEl);\n};\n\nlistEl.addEventListener('click', markup);\n\nlet previ = '';\nlet title = '';\n\nfunction markup(ev) {\n  if (ev.target === allCategoriesBtn) {\n    showAllCategories();\n    return;\n  }\n  title = ev.target.textContent;\n  drawCategory(title);\n\n  if (previ !== '') {\n    previ.style.textTransform = 'none';\n  }\n  ev.target.style.textTransform = 'uppercase';\n  previ = ev.target;\n}\n"],"names":["parcelRequire","Object","defineProperty","$de572364f701fc5e$exports","value","Validator","Transformer","Runtime","Resolver","Reporter","Packager","Optimizer","Namer","Compressor","Bundler","$de572364f701fc5e$var$CONFIG","Symbol","for","constructor","opts","this","$9da5916035344801$require$Transformer","async","asset","content","getCode","precompiled","$WMajR","precompile","setCode","type","$8MQwU","$91ff8ea46ab832f3$var$mainTitleEl","document","querySelector","$91ff8ea46ab832f3$var$mainWraperEl","$91ff8ea46ab832f3$var$idBook","$91ff8ea46ab832f3$var$title","$91ff8ea46ab832f3$export$19ae0cb1595596b","innerHTML","categories","fetchBooks","getBestSellers","$91ff8ea46ab832f3$var$makeMarkupAllCategories","seeMoreBtnEl","querySelectorAll","bookCategoryEl","$91ff8ea46ab832f3$export$86c97e2bc749f2cb","$91ff8ea46ab832f3$var$addEventListenerForBtn","error","console","log","$91ff8ea46ab832f3$var$feachAllCategories","map","category","list_name","$91ff8ea46ab832f3$export$93242e041943582c","books","join","book","book_image","_id","$91ff8ea46ab832f3$export$d0b4285b56c56ded","title","author","$91ff8ea46ab832f3$var$handleImgClick","event","preventDefault","target","dataset","id","nodeName","$5xtVg","handleModalWindow","$91ff8ea46ab832f3$var$handleSeeMoreBtnClick","$7035cf87bda54340$export$289350b6fddd83e8","length","slice","forEach","el","addEventListener","$7035cf87bda54340$var$listEl","$7035cf87bda54340$var$mainListEl","$7035cf87bda54340$var$mainTitle","$7035cf87bda54340$var$allCategoriesBtn","makeNewButtons","getCategoriesList","insertAdjacentHTML","$7035cf87bda54340$var$createCategoryList","name","getBooksByCategory","markup","titleArr","split","titleFirstPart","titleLastPart","classList","add","ev","$7035cf87bda54340$var$title","textContent","$7035cf87bda54340$var$previ","style","textTransform"],"version":3,"file":"index.1f2f5364.js.map"}