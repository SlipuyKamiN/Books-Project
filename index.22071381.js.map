{"mappings":"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","sources":["src/index.js","src/js/categories.js","src/js/home/allCategories.js"],"sourcesContent":["import './js/fetchBooks';\nimport './js/modal';\nimport './js/auth-modal';\nimport './js/scroll-up';\nimport './js/darkTheme';\nimport './js/categories';\nimport './js/home/allCategories';\nimport './js/support';\n\nimport './js/header';\nimport './js/auth';\n","// import transformer from 'parcel-transformer-hbs';\nimport { fetchBooks } from '../js/fetchBooks';\nimport { makeMarkupGategory, showAllCategories } from './home/allCategories';\n// import { handleImgClick } from './home/allCategories';\n// import { handleModalWindow } from './modal';\nimport { addEventListenerForBook } from './home/allCategories';\nimport { addEventListenerForBook } from './home/allCategories';\nimport { showAllCategories } from './home/allCategories';\n\nconst listEl = document.querySelector('.categories-list-js');\nconst mainListEl = document.querySelector('.main__list-js');\nconst mainTitle = document.querySelector('.main__title-js');\nconst allCategoriesBtn = document.querySelector('.all-categories-btn');\n\nallCategoriesBtn.classList.add('selected-categories');\n\nconst createCategoryList = async () => {\n  const categoriesList = await fetchBooks.getCategoriesList();\n\n  const makeNewButtons = categoriesList\n    .map(\n      category =>\n        `<li class= 'categories-list__item '> <button class= 'categories-list__button'>${category.list_name}</button> </li>`\n    )\n    .join('');\n  listEl.insertAdjacentHTML('beforeend', makeNewButtons);\n};\ncreateCategoryList();\n\n// allCategoriesBtn.addEventListener('click', showAllCategories);\n\nexport const drawCategory = async name => {\n  const books = await fetchBooks.getBooksByCategory(name);\n  const markup = makeMarkupGategory(books);\n  const titleArr = name.split(' ');\n  const titleFirstPart = titleArr.slice(0, titleArr.length - 1).join(' ');\n  const titleLastPart = titleArr.slice(titleArr.length - 1).join();\n  mainTitle.innerHTML = `${titleFirstPart}<span class=\"main__title--color-purple\"> ${titleLastPart}</span>`;\n  mainListEl.innerHTML = markup;\n  mainListEl.classList.add('card-set');\n  const bookCategoryEl = document.querySelectorAll('.category-books__item');\n  addEventListenerForBook(bookCategoryEl);\n  allCategoriesBtn.classList.remove('selected-categories');\n};\n\nlistEl.addEventListener('click', markup);\n\nlet previ = '';\nlet title = '';\n\nfunction markup(ev) {\n  if (ev.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  if (ev.target === allCategoriesBtn) {\n    allCategoriesBtn.classList.add('selected-categories');\n    previ.classList.remove('selected-categories');\n    showAllCategories();\n    return;\n  }\n  title = ev.target.textContent;\n  drawCategory(title);\n\n  if (previ !== '') {\n    previ.classList.remove('selected-categories');\n  }\n  ev.target.classList.add('selected-categories');\n  previ = ev.target;\n  console.log(ev.target.nodeName);\n}\n","import { fetchBooks } from '../fetchBooks';\nimport { handleModalWindow } from '../modal';\nimport { drawCategory } from '../categories';\n// import { title } from '../categories';\n\nconst mainTitleEl = document.querySelector('.main__title-js');\nconst mainWraperEl = document.querySelector('.main__list-js');\nlet idBook = 0;\nlet title = 0;\n\nexport const showAllCategories = () => {\n  mainTitleEl.innerHTML =\n    ' Best Sellers <span class=\"main__title--color-purple\">Books</span>';\n  feachAllCategories();\n};\n\nshowAllCategories();\n\nconst makeMarkupAllCategories = categories => {\n  return categories\n    .map(category => {\n      return `\n           <li class='all-categories__item'>\n           <h4 class='category-books__title'>${category.list_name}</h4>\n            <ul class='category-books__list-js card-set'>\n           ${makeMarkupGategory(category.books)}\n           </ul>\n           <button class=\"load-more-js\" type=\"button\" data-category=\"${\n             category.list_name\n           }\">see more</button>\n           </li>\n      `;\n    })\n    .join('');\n};\n\nexport const makeMarkupGategory = category => {\n  return category\n    .map(book => {\n      return `\n        <li class='category-books__item'>\n         <a href=\"/\" class='category-books__link'>\n          <img\n            class='category-books__img'\n            src='${book.book_image}'\n            alt='book'\n            data-id=\"${book._id}\"\n           loading=\"lazy\"\n          />\n          <div class='category-books__wrapper'>\n          <p class='category-books__text'>quick view</p>\n          </div>\n          </a>\n          <h3 class='category-books__name' >${checkLengthBookTitle(\n            book.title,\n            18\n          )}</h3>\n          <p class='category-books__author'>${checkLengthBookTitle(\n            book.author,\n            29\n          )}</p>\n        </li>\n      `;\n    })\n    .join('');\n};\n\nasync function feachAllCategories() {\n  try {\n    const categories = await fetchBooks.getBestSellers();\n    mainWraperEl.innerHTML = makeMarkupAllCategories(categories);\n\n    const seeMoreBtnEl = document.querySelectorAll('.load-more-js');\n    const bookCategoryEl = document.querySelectorAll('.category-books__item');\n\n    // seeMoreBtnEl.forEach(el => {\n    //   el.addEventListener('click', handleSeeMoreBtnClick);\n    // });\n\n    // bookCategoryEl.forEach(el => {\n    //   el.addEventListener('click', handleImgClick);\n    // });\n\n    addEventListenerForBook(bookCategoryEl);\n    addEventListenerForBtn(seeMoreBtnEl);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nconst handleImgClick = event => {\n  event.preventDefault();\n  idBook = event.target.dataset.id;\n\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n  handleModalWindow(idBook);\n};\n\nconst handleSeeMoreBtnClick = event => {\n  title = event.target.dataset.category;\n  console.log(title);\n  drawCategory(title);\n};\n\nexport const checkLengthBookTitle = (title, length) => {\n  if (title.length > length) {\n    return `${title.slice(0, length)}...`;\n  }\n\n  return title;\n};\n\nexport const addEventListenerForBook = book => {\n  book.forEach(el => {\n    el.addEventListener('click', handleImgClick);\n  });\n};\n\nconst addEventListenerForBtn = category => {\n  category.forEach(el => {\n    el.addEventListener('click', handleSeeMoreBtnClick);\n  });\n};\n"],"names":["parcelRequire","$8MQwU","$91ff8ea46ab832f3$var$mainTitleEl","document","querySelector","$91ff8ea46ab832f3$var$mainWraperEl","$91ff8ea46ab832f3$var$idBook","$91ff8ea46ab832f3$var$title","$91ff8ea46ab832f3$export$19ae0cb1595596b","innerHTML","async","categories","fetchBooks","getBestSellers","$91ff8ea46ab832f3$var$makeMarkupAllCategories","seeMoreBtnEl","querySelectorAll","bookCategoryEl","$91ff8ea46ab832f3$export$86c97e2bc749f2cb","$91ff8ea46ab832f3$var$addEventListenerForBtn","error","console","log","$91ff8ea46ab832f3$var$feachAllCategories","map","category","list_name","$91ff8ea46ab832f3$export$93242e041943582c","books","join","book","book_image","_id","$91ff8ea46ab832f3$export$d0b4285b56c56ded","title","author","$91ff8ea46ab832f3$var$handleImgClick","event","preventDefault","target","dataset","id","nodeName","$5xtVg","handleModalWindow","$91ff8ea46ab832f3$var$handleSeeMoreBtnClick","$7035cf87bda54340$export$289350b6fddd83e8","length","slice","forEach","el","addEventListener","$7035cf87bda54340$var$listEl","$7035cf87bda54340$var$mainListEl","$7035cf87bda54340$var$mainTitle","$7035cf87bda54340$var$allCategoriesBtn","classList","add","makeNewButtons","getCategoriesList","insertAdjacentHTML","$7035cf87bda54340$var$createCategoryList","name","getBooksByCategory","markup","titleArr","split","titleFirstPart","titleLastPart","remove","ev","$7035cf87bda54340$var$previ","$7035cf87bda54340$var$title","textContent"],"version":3,"file":"index.22071381.js.map"}