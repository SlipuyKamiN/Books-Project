{"mappings":"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","sources":["src/index.js","node_modules/@parcel/plugin/lib/PluginAPI.js","node_modules/parcel-transformer-hbs/index.js","src/js/home/allCategories.js","src/js/categories.js"],"sourcesContent":["import './js/fetchBooks';\nimport './js/modal';\nimport './js/auth-modal';\nimport './js/scroll-up';\nimport './js/darkTheme';\nimport './js/categories';\nimport './js/home/allCategories';\nimport './js/support';\n\nimport './js/header';\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Validator = exports.Transformer = exports.Runtime = exports.Resolver = exports.Reporter = exports.Packager = exports.Optimizer = exports.Namer = exports.Compressor = exports.Bundler = void 0;\nconst CONFIG = Symbol.for('parcel-plugin-config');\n\nclass Transformer {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Transformer = Transformer;\n\nclass Resolver {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Resolver = Resolver;\n\nclass Bundler {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Bundler = Bundler;\n\nclass Namer {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Namer = Namer;\n\nclass Runtime {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Runtime = Runtime;\n\nclass Validator {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Validator = Validator;\n\nclass Packager {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Packager = Packager;\n\nclass Optimizer {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Optimizer = Optimizer;\n\nclass Compressor {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Compressor = Compressor;\n\nclass Reporter {\n  constructor(opts) {\n    // $FlowFixMe\n    this[CONFIG] = opts;\n  }\n\n}\n\nexports.Reporter = Reporter;","const { Transformer } = require(\"@parcel/plugin\")\nconst Handlebars  = require(\"handlebars\");\n\nconst transformer = new Transformer({\n  async transform({ asset }) {\n    const content = await asset.getCode();\n    const precompiled = Handlebars.precompile(content);\n    asset.setCode(`\n    import Handlebars from 'handlebars';\n    const templateFunction = Handlebars.template(${precompiled});\n    export default templateFunction`)\n    asset.type = \"js\"\n    return [asset];\n  },\n});\n\nmodule.exports = transformer;\n","import { fetchBooks } from '../fetchBooks';\nimport { handleModalWindow } from '../modal';\n\nconst mainTitleEl = document.querySelector('.main__title-js');\nconst mainWraperEl = document.querySelector('.main__list-js');\nlet idBook = 0;\n\nexport const showAllCategories = () => {\n  mainTitleEl.innerHTML =\n    ' Best Sellers <span class=\"main__title--color-purple\">Books</span>';\n  feachAllCategories();\n};\n\nshowAllCategories();\n\nconst makeMarkupAllCategories = categories => {\n  return categories\n    .map(category => {\n      return `\n           <li class='all-categories__item'>\n           <h4 class='category-books__title'>${category.list_name}</h4>\n            <ul class='category-books__list-js card-set'>\n           ${makeMarkupGategory(category.books)}\n           </ul>\n           <button class=\"load-more-js\" type=\"button\">see more</button>\n           </li>\n      `;\n    })\n    .join('');\n};\n\nexport const makeMarkupGategory = category => {\n  return category\n    .map(book => {\n      return `\n        <li class='category-books__item'>\n         <a href=\"/\" class='category-books__link'>\n          <img\n            class='category-books__img'\n            src='${book.book_image}'\n            alt='book'\n            data-id=\"${book._id}\"\n           loading=\"lazy\"\n          />\n          <div class='category-books__wrapper'>\n          <p class='category-books__text'>quick view</p>\n          </div>\n          </a>\n          <h3 class='category-books__name' >${checkLengthBookTitle(\n            book.title\n          )}</h3>\n          <p class='category-books__author'>${book.author}</p>\n        </li>\n      `;\n    })\n    .join('');\n};\n\nasync function feachAllCategories() {\n  try {\n    const categories = await fetchBooks.getBestSellers();\n    mainWraperEl.innerHTML = makeMarkupAllCategories(categories);\n\n    const seeMoreBtnEl = document.querySelectorAll('.load-more-js');\n    const bookCategoryEl = document.querySelectorAll('.category-books__item');\n\n    // seeMoreBtnEl.forEach(el => {\n    //   el.addEventListener('click', handleSeeMoreBtnClick);\n    // });\n\n    // bookCategoryEl.forEach(el => {\n    //   el.addEventListener('click', handleImgClick);\n    // });\n\n    addEventListenerForBook(bookCategoryEl);\n    addEventListenerForBtn(seeMoreBtnEl);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nconst handleImgClick = event => {\n  event.preventDefault();\n  idBook = event.target.dataset.id;\n\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n  handleModalWindow(idBook);\n};\n\nconst handleSeeMoreBtnClick = event => {\n  event.target.classList.add('visually-hidden');\n};\n\nexport const checkLengthBookTitle = title => {\n  if (title.length > 19) {\n    return `${title.slice(0, 18)}...`;\n  }\n\n  return title;\n};\n\nexport const addEventListenerForBook = book => {\n  book.forEach(el => {\n    el.addEventListener('click', handleImgClick);\n  });\n};\n\nconst addEventListenerForBtn = category => {\n  category.forEach(el => {\n    el.addEventListener('click', handleSeeMoreBtnClick);\n  });\n};\n","import transformer from 'parcel-transformer-hbs';\nimport { fetchBooks } from '../js/fetchBooks';\nimport { makeMarkupGategory, showAllCategories } from './home/allCategories';\nimport { handleImgClick } from './home/allCategories';\nimport { handleModalWindow } from './modal';\nimport { addEventListenerForBook } from './home/allCategories';\n// import { checkLengthBookTitle } from './home/allCategories';\nimport { addEventListenerForBook } from './home/allCategories';\nimport { showAllCategories } from './home/allCategories';\n\nconst listEl = document.querySelector('.categories-list-js');\nconst mainListEl = document.querySelector('.main__list-js');\nconst mainTitle = document.querySelector('.main__title-js');\nconst allCategoriesBtn = document.querySelector('.all-categories-btn');\n\nconst createCategoryList = async () => {\n  const categoriesList = await fetchBooks.getCategoriesList();\n\n  const makeNewButtons = categoriesList\n    .map(\n      category =>\n        `<li class= 'categories-list__button'> <button>${category.list_name}</button> </li>`\n    )\n    .join('');\n  listEl.insertAdjacentHTML('beforeend', makeNewButtons);\n};\ncreateCategoryList();\n\n// allCategoriesBtn.addEventListener('click', showAllCategories);\n\nexport const drawCategory = async name => {\n  const books = await fetchBooks.getBooksByCategory(name);\n  const markup = makeMarkupGategory(books);\n  const titleArr = name.split(' ');\n  const titleFirstPart = titleArr.slice(0, titleArr.length - 1).join(' ');\n  const titleLastPart = titleArr.slice(titleArr.length - 1).join();\n  mainTitle.innerHTML = `${titleFirstPart}<span class=\"main__title--color-purple\"> ${titleLastPart}</span>`;\n  mainListEl.innerHTML = markup;\n  mainListEl.classList.add('card-set');\n  const bookCategoryEl = document.querySelectorAll('.category-books__item');\n  addEventListenerForBook(bookCategoryEl);\n};\n\nlistEl.addEventListener('click', markup);\n\nlet previ = '';\nlet title = '';\n\nfunction markup(ev) {\n  if (ev.target === allCategoriesBtn) {\n    showAllCategories();\n    return;\n  }\n  title = ev.target.textContent;\n  drawCategory(title);\n\n  if (previ !== '') {\n    previ.style.textTransform = 'none';\n  }\n  ev.target.style.textTransform = 'uppercase';\n  previ = ev.target;\n}\n"],"names":["parcelRequire","Object","defineProperty","$de572364f701fc5e$exports","value","Validator","Transformer","Runtime","Resolver","Reporter","Packager","Optimizer","Namer","Compressor","Bundler","$de572364f701fc5e$var$CONFIG","Symbol","for","constructor","opts","this","$9da5916035344801$require$Transformer","async","asset","content","getCode","precompiled","$WMajR","precompile","setCode","type","$8MQwU","$91ff8ea46ab832f3$var$mainTitleEl","document","querySelector","$91ff8ea46ab832f3$var$mainWraperEl","$91ff8ea46ab832f3$var$idBook","$91ff8ea46ab832f3$export$19ae0cb1595596b","innerHTML","categories","fetchBooks","getBestSellers","$91ff8ea46ab832f3$var$makeMarkupAllCategories","seeMoreBtnEl","querySelectorAll","bookCategoryEl","$91ff8ea46ab832f3$export$86c97e2bc749f2cb","$91ff8ea46ab832f3$var$addEventListenerForBtn","error","console","log","$91ff8ea46ab832f3$var$feachAllCategories","map","category","list_name","$91ff8ea46ab832f3$export$93242e041943582c","books","join","book","book_image","_id","$91ff8ea46ab832f3$export$d0b4285b56c56ded","title","author","$91ff8ea46ab832f3$var$handleImgClick","event","preventDefault","target","dataset","id","nodeName","$5xtVg","handleModalWindow","$91ff8ea46ab832f3$var$handleSeeMoreBtnClick","classList","add","length","slice","forEach","el","addEventListener","$7035cf87bda54340$var$listEl","$7035cf87bda54340$var$mainListEl","$7035cf87bda54340$var$mainTitle","$7035cf87bda54340$var$allCategoriesBtn","makeNewButtons","getCategoriesList","insertAdjacentHTML","$7035cf87bda54340$var$createCategoryList","ev","$7035cf87bda54340$var$title","textContent","name","getBooksByCategory","markup","titleArr","split","titleFirstPart","titleLastPart","$7035cf87bda54340$export$289350b6fddd83e8","$7035cf87bda54340$var$previ","style","textTransform"],"version":3,"file":"index.7ac78aa1.js.map"}